<!DOCTYPE html>
<html lang="en">
<!-- Previous head and style sections remain the same -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopZari - Designer Indian Wear Rentals</title>
    <!-- Keep all the existing styles here, they're correct -->
    <style>
        /* All your existing styles remain the same */
    </style>
</head>
<body>
    <!-- Keep all the existing HTML sections -->
    <section class="hero">
        <!-- Hero content remains the same -->
    </section>

    <section class="collections">
        <!-- Collections content remains the same -->
    </section>

    <script>
        // Constants
        const SUPABASE_URL = 'https://ttoszckfryqufdcrxzej.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0b3N6Y2tmcnlxdWZkY3J4emVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzOTc4NTMsImV4cCI6MjA1MDk3Mzg1M30.OSIRZP_0rkFTTrZnqAZ9lDGcvJhBONlHVyrzHSMeT_4'; // Your anon key here

        document.getElementById('waitlistForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('emailInput').value;
            const messageDiv = document.getElementById('message');
            const submitButton = document.getElementById('submitButton');
            
            // Clear previous messages
            messageDiv.style.display = 'none';
            messageDiv.textContent = '';
            
            // Disable button and show loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Joining...';

            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/waitlist`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': SUPABASE_KEY,
                        'Prefer': 'return=minimal'
                    },
                    body: JSON.stringify({ email })
                });

                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    const responseText = await response.text();
                    console.log('Error response:', responseText);
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // Success case
                messageDiv.textContent = 'Thanks for joining! We'll notify you when we launch.';
                messageDiv.className = 'message success';
                document.getElementById('emailInput').value = '';
                
            } catch (error) {
                console.error('Error:', error);
                messageDiv.textContent = 'Error submitting email. Please try again.';
                messageDiv.className = 'message error';
            } finally {
                // Always show the message and reset the button
                messageDiv.style.display = 'block';
                submitButton.disabled = false;
                submitButton.textContent = 'Join the Waitlist';
            }
        });
    </script>
</body>
</html>
